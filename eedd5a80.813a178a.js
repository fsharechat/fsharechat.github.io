(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{117:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return u}));var r=n(2),i=n(6),a=(n(0),n(130)),c={layout:"post",title:"\u9001\u8fbe\u4e0e\u5df2\u8bfb\u56de\u6267\u7684\u8bbe\u8ba1\u65b9\u6848\u8bf4\u660e",description:"docker IM cloud native",category:"IM"},l={unversionedId:"concept/delivery-read-report",id:"concept/delivery-read-report",isDocsHomePage:!1,title:"\u9001\u8fbe\u4e0e\u5df2\u8bfb\u56de\u6267\u7684\u8bbe\u8ba1\u65b9\u6848\u8bf4\u660e",description:"docker IM cloud native",source:"@site/docs/concept/delivery-read-report.md",slug:"/concept/delivery-read-report",permalink:"/docs/concept/delivery-read-report",version:"current",sidebar:"docs",previous:{title:"\u591a\u4eba\u97f3\u89c6\u9891\u4f1a\u8bdd\u65b9\u6848\u9884\u7814",permalink:"/docs/concept/muti-conference-rtc"},next:{title:"MySQL\u57fa\u672c\u5b89\u88c5",permalink:"/docs/prepare/mysql"}},b=[{value:"\u8bbe\u8ba1\u8981\u70b9",id:"\u8bbe\u8ba1\u8981\u70b9",children:[]},{value:"\u9001\u8fbe\u56de\u6267",id:"\u9001\u8fbe\u56de\u6267",children:[]},{value:"\u5df2\u8bfb\u56de\u6267",id:"\u5df2\u8bfb\u56de\u6267",children:[]},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",children:[]}],d={rightToc:b};function u(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},d,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"\u672c\u6587\u4e3b\u8981\u8bf4\u660e\u9001\u8fbe\u4e0e\u9605\u8bfb\u56de\u6267\u7684\u5b9e\u73b0\u65b9\u6848,\u5e76\u7ed9\u51fa\u5177\u4f53\u7684\u8bbe\u8ba1,\u4ec5\u4f9b\u53c2\u8003"),Object(a.b)("h2",{id:"\u8bbe\u8ba1\u8981\u70b9"},"\u8bbe\u8ba1\u8981\u70b9"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u9001\u8fbe\u56de\u6267\u53ea\u4e0a\u62a5\u5355\u804a,\u7fa4\u804a\u6d88\u606f\u4e0d\u4e0a\u62a5\u9001\u8fbe\u56de\u6267"),Object(a.b)("li",{parentName:"ul"},"\u9001\u8fbe\u53ea\u5728\u5355\u804a\u754c\u9762\u4e2d\u663e\u793a,\u7fa4\u804a\u4e0d\u5173\u5fc3\u9001\u8fbe.\u90a3\u4e48\u6839\u636e",Object(a.b)("inlineCode",{parentName:"li"},"uid"),"\u548c",Object(a.b)("inlineCode",{parentName:"li"},"target"),"\u5c31\u80fd\u786e\u5b9a\u5f53\u524d\u7528\u6237\u7684\u5355\u804a\u754c\u9762\u6700\u540e\u4e00\u6b21\u6d88\u606f\u7684\u9001\u8fbe\u65f6\u95f4"),Object(a.b)("li",{parentName:"ul"},"\u5355\u804a\u5df2\u8bfb\u56de\u6267,\u540c\u9001\u8fbe\u56de\u6267\u539f\u7406\u4e00\u6837")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u7fa4\u804a\u6ca1\u6709\u9001\u8fbe\u56de\u6267,\u53ea\u7edf\u8ba1\u5df2\u8bfb\u56de\u6267.",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"\u4e0a\u62a5\u65f6\u673a.\u5f53\u7528\u6237\u8fdb\u884c\u4f1a\u8bdd\u5207\u6362"),Object(a.b)("li",{parentName:"ul"},"\u5982\u679c\u7528\u6237\u8bfb\u53d6\u4e86\u6539\u7fa4\u7ec4\u7684\u6700\u540e\u4e00\u6761\u6d88\u606f,\u4ee3\u8868\u8fd9\u4e2a\u7528\u6237\u8bfb\u53d6\u6240\u6709\u5176\u4ed6\u7528\u6237\u53d1\u9001\u7684\u6d88\u606f.\u5373\u662f\u4efb\u610f\u53d1\u9001\u6d88\u606f\u7ed9\u8be5\u7fa4\u7ec4\u7684\u7528\u6237\u53ef\u4ee5\u901a\u8fc7",Object(a.b)("inlineCode",{parentName:"li"},"uid"),"\u548c",Object(a.b)("inlineCode",{parentName:"li"},"target"),"\u6765\u786e\u5b9a\u8be5uid\u7528\u6237\u662f\u5426\u8bfb\u53d6\u4e86\u6d88\u606f"),Object(a.b)("li",{parentName:"ul"},"\u5bf9\u4e8e\u7fa4\u7ec4\u6d88\u606f\u7684\u5df2\u8bfb\u56de\u6267\u4e0a\u62a5,\u8981\u4e0a\u62a5\u5f53\u524d\u7fa4\u7ec4\u4f1a\u8bdd\u4e2d,\u53d1\u9001\u6d88\u606f\u7684\u7528\u6237ID")))),Object(a.b)("h2",{id:"\u9001\u8fbe\u56de\u6267"},"\u9001\u8fbe\u56de\u6267"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u9001\u8fbe",Object(a.b)("br",{parentName:"li"}),"\u4ee3\u8868\u63a5\u6536\u5230\u5bf9\u65b9\u53d1\u9001\u7684\u6d88\u606f,\u8fd9\u91cc\u6307\u62c9\u53d6\u5230\u6700\u65b0\u7684\u7528\u6237\u6d88\u606f\u7684\u65f6\u95f4\u70b9")),Object(a.b)("p",null,"\u6bcf\u4e2a\u7528\u6237\u4e0a\u62a5\u81ea\u5df1\u6700\u540e\u4e00\u6b21\u63a5\u6536\u6d88\u606f\u7684\u65f6\u95f4"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"\u4ee5\u4e0b\u4e3a\u9001\u8fbe\u56de\u6267sql")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sql"}),"DROP TABLE IF EXISTS `t_delivery_report`;\nCREATE TABLE `t_delivery_report` (\n  `id` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,\n  `_uid` varchar(64) NOT NULL,\n  `_target` varchar(64) NOT NULL,\n  `_rid` bigint(20) NOT NULL,\n  `_dt` bigint(20) NOT NULL,\n  UNIQUE INDEX `delivery_index` (`_uid` DESC, `_target` DESC )\n)\nENGINE = InnoDB\nDEFAULT CHARACTER SET = utf8mb4\nCOLLATE = utf8mb4_unicode_ci;\n")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u83b7\u53d6\u9001\u8fbe\u56de\u6267")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sql"}),"DROP TABLE IF EXISTS `t_user_delivery_report`;\nCREATE TABLE `t_user_delivery_report` (\n  `id` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,\n  `_rid` bigint(20) NOT NULL,\n  `_uid` varchar(64) NOT NULL,\n  `_seq` bigint(20) NOT NULL,\n  `_dt` DATETIME NOT NULL DEFAULT NOW(),\n  INDEX `user_delivery_index` (`_uid` DESC, `_seq` DESC),\n  UNIQUE INDEX `user_delivery_index2` (`_uid` DESC, `_rid` DESC)\n)\nENGINE = InnoDB\nDEFAULT CHARACTER SET = utf8mb4\nCOLLATE = utf8mb4_unicode_ci;\n\n")),Object(a.b)("p",null,"\u9001\u8fbe\u56de\u6267\u6301\u4e45\u5316\u5b58\u50a8,\u91c7\u7528\u5373\u65f6\u63a8\u9001\u673a\u5236,\u7528\u6237\u53d1\u9001\u9001\u8fbe\u56de\u6267\u540e,\u63a8\u9001\u7ed9\u53d1\u9001\u8005\u5f53\u524d\u9001\u8fbe\u56de\u6267seq,\u53d1\u9001\u8005\u6839\u636eseq\u83b7\u53d6\u6700\u65b0\u7684\u9001\u8fbe\u56de\u6267\u5217\u8868.\n\u539f\u7406\u540c\u53d1\u9001\u6d88\u606f\u7684\u63a8\u62c9\u6a21\u5f0f"),Object(a.b)("h2",{id:"\u5df2\u8bfb\u56de\u6267"},"\u5df2\u8bfb\u56de\u6267"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u5df2\u8bfb",Object(a.b)("br",{parentName:"li"}),"\u5df2\u8bfb\u8ddf\u5df2\u9001\u8fbe\u6709\u70b9\u533a\u522b,\u9001\u8fbe\u4ee3\u8868\u7528\u6237\u5df2\u7ecf\u62c9\u53d6\u5230\u5bf9\u65b9\u53d1\u6765\u7684\u6d88\u606f,\u5728\u6536\u5230\u6d88\u606f\u540e,\u4e0a\u62a5\u6b64\u65f6\u6536\u5230\u65b0\u6d88\u606f\u7684\u6700\u65b0\u65f6\u95f4,\u8fd9\u4e2a\u65f6\u95f4\u70b9.\u5c31\u662f\u8be5\u7528\u6237\u7684\u63a5\u6536\u6d88\u606f\u65f6\u95f4\u70b9.\n\u7531\u4e8e\u6d88\u606f\u5728\u6bcf\u4e2a\u4f1a\u8bdd\u4e2d,\u6bcf\u4e2a\u4f1a\u8bdd\u90fd\u6709\u9605\u8bfb\u65f6\u95f4\u70b9.\u7528\u6237\u6ca1\u6709\u70b9\u51fb\u8fd9\u4e2a\u4f1a\u8bdd\u4ee3\u8868\u7528\u6237\u6ca1\u6709\u9605\u8bfb\u8be5\u4f1a\u8bdd\u5185\u7684\u6d88\u606f.\u5982\u679c\u53ea\u4e0a\u62a5\u4e00\u6761\u5df2\u8bfb\u6d88\u606f,\u65e0\u6cd5\u533a\u5206\u7528\u6237\u5230\u5e95\u9605\u8bfb\u7684\u662f\u90a3\u4e2a\u4f1a\u8bdd\u91cc\u9762\u7684\u6d88\u606f")),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"\u5df2\u8bfb\u56de\u6267\u5b58\u50a8")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sql"}),"DROP TABLE IF EXISTS `t_read_report`;\nCREATE TABLE `t_read_report` (\n  `id` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,\n  `_uid` varchar(64) NULL,\n  `_rid` bigint(20) NOT NULL,\n  `_type` tinyint NULL,\n  `_line` int(11) NULL,\n  `_target` varchar(64) NULL,\n  `_dt` bigint(20) NOT NULL DEFAULT 0,\n  INDEX `read_report_index` (`_uid`, `_type`, `_line`, `_target`),\n  UNIQUE INDEX `read_report_index2` (`_uid` DESC, `_target` DESC )\n)\nENGINE = InnoDB\nDEFAULT CHARACTER SET = utf8mb4\nCOLLATE = utf8mb4_unicode_ci;\n")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u83b7\u53d6\u5df2\u8bfb\u56de\u6267")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sql"}),"DROP TABLE IF EXISTS `t_user_read_report`;\nCREATE TABLE `t_user_read_report` (\n    `id` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,\n    `_rid` bigint(20) NOT NULL,\n    `_uid` varchar(64) NOT NULL,\n    `_seq` bigint(20) NOT NULL,\n    `_dt` DATETIME NOT NULL DEFAULT NOW(),\n    INDEX `user_read_report_index` (`_uid` DESC, `_seq` DESC),\n    UNIQUE INDEX `user_read_report_index2` (`_uid` DESC, `_rid` DESC)\n)\nENGINE = InnoDB\nDEFAULT CHARACTER SET = utf8mb4\nCOLLATE = utf8mb4_unicode_ci;\n")),Object(a.b)("h2",{id:"\u53c2\u8003\u8d44\u6599"},"\u53c2\u8003\u8d44\u6599"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://docs.wildfirechat.cn/blogs/%E5%B7%B2%E9%80%81%E8%BE%BE%E5%92%8C%E5%B7%B2%E8%AF%BB%E5%9B%9E%E6%89%A7%E5%8A%9F%E8%83%BD%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E.html"}),"\u5df2\u9001\u8fbe\u548c\u5df2\u8bfb\u56de\u6267\u529f\u80fd\u8bf4\u660e"))))}u.isMDXComponent=!0}}]);